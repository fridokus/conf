syntax enable
set hidden
set number
set showcmd
set shiftwidth=2
set shiftround
set expandtab
" set tabstop=2
set autoindent
set copyindent
set list
set listchars=tab:>.,trail:.,extends:#,nbsp:.
set history=200 " Extend change history
" set cursorline
set background=dark
set ruler
set clipboard=unnamedplus
set formatoptions+=o
set textwidth=0
" set inccommand=split
nnoremap <leader>a :let _s=@/<Bar>:%s/\s\+$//e<Bar>:let @/=_s<Bar><CR>
noremap Q <nop>
noremap รถ ; " Simulate part of US keyboard
noremap <leader>f :FZF<CR>
noremap <leader>t :silent !t<CR>
noremap <space> :write<CR>
noremap <leader>% :MtaJumpToOtherTag<CR>
"noremap <leader>sw :VimwikiAll2HTML<CR><CR>
noremap <leader>s :exec "!make"<CR>
"nmap <silent> <leader>ev :e $MYVIMRC<CR>
"nmap <silent> <leader>sv :so $MYVIMRC<CR>
set undofile
filetype plugin indent on

autocmd! BufWritePost * Neomake
"autocmd! VimEnter * if argc() == 0 | execute 'Marks' | endif
autocmd! BufWinEnter,WinEnter term://* startinsert

call plug#begin('~/.vim/plugged')
  Plug 'https://github.com/neomake/neomake.git' "Neomake
  "Plug 'junegunn/fzf', { 'dir': '~/.fzf', 'do': './install --all' } "Fuzzy file finder
  "Plug 'junegunn/fzf.vim'
  Plug 'https://github.com/morhetz/gruvbox.git' "Theme
  Plug 'https://github.com/lervag/vimtex.git' "LaTeX support
  Plug 'https://github.com/SirVer/ultisnips.git' "TAB completion
  Plug 'https://github.com/honza/vim-snippets.git'
  "Plug 'https://github.com/ludovicchabant/vim-gutentags'
  Plug 'Shougo/deoplete.nvim', { 'do': ':UpdateRemotePlugins' } "Async completion
  "Plug 'zchee/deoplete-jedi'
  "Plug 'https://github.com/tpope/vim-surround'
  "Plug 'https://github.com/mattn/emmet-vim.git'
  "Plug 'https://github.com/Valloric/MatchTagAlways.git'
  Plug 'https://github.com/vimwiki/vimwiki.git' "VimWIKI
  Plug 'https://github.com/tpope/vim-commentary' "Uncomment and comment
call plug#end()


let g:deoplete#enable_at_startup = 1
let g:deoplete#auto_complete_delay = 50

"let g:UltiSnipsExpandTrigger='<tab>'
"let g:UltiSnipsEditSplit='vertical'
"let g:UltiSnipsUsePythonVersion=3

let g:vimtex_fold_enabled=1
let g:vimtex_latexmk_continuous=1
let g:vimtex_view_method='zathura'
let g:vimtex_latexmk_progname='/home/jan/.local/bin/nvr'

let g:gruvbox_italic=1
let g:gruvbox_contrast_dark='hard'
"let g:gruvbox_contrast_light='hard'

let g:vim_markdown_math = 1

colorscheme gruvbox

"Yank-style like D and C
noremap Y y$
"Remove highlight!
nnoremap <esc><esc> :noh<return><esc>

" FZF
" Buffers
noremap <leader>b :Buffers<CR>
noremap <leader>c :bd<CR>
noremap <leader>m :Marks<CR>
noremap <f1> :b1<cr>
noremap <f2> :b2<cr>
noremap <f3> :b3<cr>
noremap <f4> :b4<cr>
noremap <f5> :b5<cr>
noremap <f6> :b6<cr>
noremap <f7> :b7<cr>
noremap <f8> :b8<cr>
noremap <f9> :b9<cr>
noremap <f10> :b10<cr>
" Mapping selecting mappings
nmap <leader><tab> <plug>(fzf-maps-n)
xmap <leader><tab> <plug>(fzf-maps-x)
omap <leader><tab> <plug>(fzf-maps-o)
" Insert mode completion
imap <c-x><c-k> <plug>(fzf-complete-word)
imap <c-x><c-f> <plug>(fzf-complete-path)
imap <c-x><c-j> <plug>(fzf-complete-file-ag)
imap <c-x><c-l> <plug>(fzf-complete-line)
" Terminal mappings
tnoremap <Esc> <C-\><C-n>
tnoremap <C-w> <C-\><C-n><C-w>
tnoremap <f1> <C-\><C-n>:b1<cr>
tnoremap <f2> <C-\><C-n>:b2<cr>
tnoremap <f3> <C-\><C-n>:b3<cr>
tnoremap <f4> <C-\><C-n>:b4<cr>
tnoremap <f5> <C-\><C-n>:b5<cr>
tnoremap <f6> <C-\><C-n>:b6<cr>
tnoremap <f7> <C-\><C-n>:b7<cr>
tnoremap <f8> <C-\><C-n>:b8<cr>
tnoremap <f9> <C-\><C-n>:b9<cr>
tnoremap <f10> <C-\><C-n>:b10<cr>

let g:vimwiki_list = [{'path': '$HOME/SD/vimwiki', 'path_html': '$HOME/SD/vimwiki_html', 'auto_export': 0}]
let g:vimwiki_folding='expr'
